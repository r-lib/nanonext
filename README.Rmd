---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r}
#| include: false
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# nanonext <a href="https://nanonext.r-lib.org/" alt="nanonext"><img src="man/figures/logo.png" alt="nanonext logo" align="right" width="120" /></a>

<!-- badges: start -->
[![CRAN status](https://www.r-pkg.org/badges/version/nanonext)](https://CRAN.R-project.org/package=nanonext)
[![R-universe status](https://r-lib.r-universe.dev/badges/nanonext?color=3f72af)](https://r-lib.r-universe.dev/nanonext)
[![R-CMD-check](https://github.com/r-lib/nanonext/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/r-lib/nanonext/actions/workflows/R-CMD-check.yaml)
[![Codecov test coverage](https://codecov.io/gh/r-lib/nanonext/graph/badge.svg)](https://app.codecov.io/gh/r-lib/nanonext)
<!-- badges: end -->

R binding for NNG (Nanomsg Next Gen), a successor to ZeroMQ. NNG is a socket library for reliable, high-performance messaging over in-process, IPC, TCP, WebSocket and secure TLS transports. Implements 'Scalability Protocols', a standard for common communications patterns including publish/subscribe, request/reply and service discovery.

As its own threaded concurrency framework, provides a toolkit for asynchronous programming and distributed computing. Intuitive 'aio' objects resolve automatically when asynchronous operations complete, and synchronisation primitives allow R to wait upon events signalled by concurrent threads.

Designed for performance and reliability, nanonext is a lightweight wrapper around the NNG C library, and is itself implemented almost entirely in C.

Provides the interface for code and processes to communicate with each other - receive data generated in Python, perform analysis in R, and send results to a C++ program â€“ on the same computer or across networks spanning the globe.

Implemented scalability protocols:

- Bus (mesh networks)
- Pair (two-way radio)
- Poly (one-to-one of many)
- Push/Pull (one-way pipeline)
- Publisher/Subscriber (topics & broadcast)
- Request/Reply (RPC)
- Surveyor/Respondent (voting & service discovery)

Supported transports:

- inproc (intra-process)
- IPC (inter-process)
- TCP (IPv4 or IPv6)
- WebSocket
- TLS (over TCP and WebSocket)

Development of the TLS implementation was generously supported by the 
<img src="https://r-consortium.org/images/RConsortium_Horizontal_Pantone.webp" alt="R Consortium" width="100" height="22" /> .

### Capabilities

#### Asynchronous I/O

Non-blocking operations with 'aio' objects that resolve automatically upon completion. Combined with
condition variables, enables true event-driven programming in R without polling.

#### Cross-language Messaging

Exchange data with Python, C++, Go, Rust, and other languages via NNG's portable wire format.
Build polyglot distributed systems where each component uses the best tool for the job.

#### HTTP/WebSocket Server

Build HTTP servers in R with dynamic request handlers, WebSocket support, and streaming
(Server-Sent Events, NDJSON) for real-time applications.

#### Async HTTP Client

High-performance HTTP(S) client with `ncurl()`, supporting async requests, persistent sessions,
and all standard HTTP methods.

### Documentation

- [Quick Reference](https://nanonext.r-lib.org/articles/nanonext.html) - cheatsheet
- [Messaging and Async I/O](https://nanonext.r-lib.org/articles/v01-messaging.html) - cross-language exchange, async operations, synchronisation
- [Scalability Protocols](https://nanonext.r-lib.org/articles/v02-protocols.html) - request/reply, pub/sub, surveyor/respondent
- [Configuration and Security](https://nanonext.r-lib.org/articles/v03-configuration.html) - TLS, options, serialization
- [Web Utilities](https://nanonext.r-lib.org/articles/v04-web.html) - HTTP client/server, WebSocket, streaming

### Installation

Install the latest release from CRAN:

```{r}
#| label: cran
#| eval: false
install.packages("nanonext")
```

Or the current development version from R-universe:

```{r}
#| label: universe
#| eval: false
install.packages("nanonext", repos = "https://r-lib.r-universe.dev")
```

### Building from Source

#### Linux / Mac / Solaris

Installation from source requires 'libnng' >= v1.9.0 and 'libmbedtls' >= 2.5.0 (suitable installations are automatically detected), or else 'cmake' to compile 'libnng' v1.11.0 and 'libmbedtls' v3.6.5 included within the package sources.

**It is recommended for optimal performance and stability to let the package automatically compile bundled versions of 'libmbedtls' and 'libnng' during installation.** To ensure the libraries are compiled from source even if system installations are present, set the `NANONEXT_LIBS` environment variable prior to installation e.g. by `Sys.setenv(NANONEXT_LIBS = 1)`.

As system libraries, 'libnng' is available as libnng-dev (deb) or nng-devel (rpm), and 'libmbedtls' as libmbedtls-dev (deb) or libmbedtls-devel (rpm). The `INCLUDE_DIR` and `LIB_DIR` environment variables may be set prior to package installation to specify a custom location for 'libmbedtls' or 'libnng' other than the standard filesystem locations.

*Solaris: requires a more recent version of 'cmake' than available on OpenCSW - refer to the 'cmake' website for the latest source file.*

#### Windows

On Windows, 'libnng' v1.11.0 and 'libmbedtls' v3.6.5 will be compiled from the package sources during installation and hence requires the 'Rtools' toolchain.

For R >= 4.2 using the 'Rtools42' or newer toolchains, the prerequisite 'cmake' is included. For previous R versions using 'Rtools40' or earlier, it may be necessary to separately install a version of 'cmake' in Windows and ensure that it is added to your system's `PATH`.

### Acknowledgements

- [Garrett D'Amore](https://github.com/gdamore), author of the NNG library, for generous advice and for implementing a feature request specifically for a more efficient 'aio' implementation in `nanonext`.
- The [R Consortium](https://r-consortium.org/) for funding the development of the secure TLS capabilities in the package, and [Henrik Bengtsson](https://github.com/HenrikBengtsson) and [Will Landau](https://github.com/wlandau/)'s roles in making this possible.
- [Joe Cheng](https://github.com/jcheng5/) for prototyping the integration of `nanonext` with `later` to support the next generation of completely event-driven 'promises'.
- [Luke Tierney](https://github.com/ltierney/) (R Core) and [Mike Cheng](https://github.com/coolbutuseless) for meticulous documentation of the R serialization mechanism, which led to the package's own implementation of a low-level interface to R serialization.
- [Travers Ching](https://github.com/traversc) for a novel idea in extending the original custom serialization support in the package.
- [Jeroen Ooms](https://github.com/jeroen) - for his 'Anticonf (tm)' configure script, on which our original 'configure' was based, although much modified since.

### Links

- [nanonext](https://nanonext.r-lib.org/)
- [CRAN HPC Task View](https://cran.r-project.org/view=HighPerformanceComputing)
- [CRAN Web Technologies Task View](https://cran.r-project.org/view=WebTechnologies)
- [NNG](https://nng.nanomsg.org/)
- [Mbed TLS](https://www.trustedfirmware.org/projects/mbed-tls/)

--

Please note that this project is released with a [Contributor Code of Conduct](https://nanonext.r-lib.org/CODE_OF_CONDUCT.html). By participating in this project you agree to abide by its terms.
